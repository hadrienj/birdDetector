(this.webpackJsonpbird_app=this.webpackJsonpbird_app||[]).push([[0],{25:function(e,t,a){e.exports=a(57)},30:function(e,t,a){},31:function(e,t,a){},57:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),o=a(20),r=a.n(o),l=(a(30),a(3)),s=a(4),c=a(6),d=a(5),h=a(2),u=a(7),p=(a(31),a(21)),m=a.n(p),f=a(22),b=a.n(f),v=function(e){function t(e){return Object(l.a)(this,t),Object(c.a)(this,Object(d.a)(t).call(this,e))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement(b.a,{data:[{y:this.props.data,type:"scatter",mode:"lines",marker:{color:"#2EBCE7"},rangemode:"nonnegative"}],layout:{xaxis:{range:[0,this.props.data.length],showgrid:!1},yaxis:{range:[0,1],showgrid:!1},width:window.innerWidth,height:200,autosize:!1,margin:{l:0,r:0,b:0,t:0,pad:0}},divId:"spectrogram"})}}]),t}(n.Component),g=a(8),y=a.n(g),w=a(9),j=a.n(w),O=a(23),E=a.n(O),k=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={loading:!0},a.colors=E()({colormap:"hot",nshades:256,format:"float"}),a.wavesurfer=y.a.create({container:"#waveform",height:100,pixelRatio:2,scrollParent:!0,normalize:!1,autoCenter:!1,barHeight:2,backend:"WebAudio",waveColor:"#2EBCE7",partialRender:!0,plugins:[j.a.create({wavesurfer:a.wavesurfer,container:"#spectrogram",pixelRatio:2,colorMap:a.colors})]});try{a.wavesurfer.load(a.props.audioPath)}catch(n){console.log("err",n)}return a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(e){if(e.isPlaying!==this.props.isPlaying&&this.wavesurfer.playPause(),e.isLoaded!==this.props.isLoaded){var t=document.getElementById("waveform");t.removeChild(t.firstChild),this.wavesurfer=y.a.create({container:"#waveform",height:100,pixelRatio:2,scrollParent:!0,normalize:!1,autoCenter:!1,barHeight:2,backend:"WebAudio",waveColor:"#2EBCE7",partialRender:!0,plugins:[j.a.create({wavesurfer:this.wavesurfer,container:"#spectrogram",pixelRatio:2,colorMap:this.colors})]});try{this.wavesurfer.load(this.props.audioPath),this.props.onFileLoaded(!1)}catch(a){console.log("err",a)}}}},{key:"render",value:function(){return i.a.createElement("div",null,"asdf")}}]),t}(n.Component),F=a(24),C=a.n(F),D=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={file:null},a.onFormSubmit=a.onFormSubmit.bind(Object(h.a)(a)),a.onChange=a.onChange.bind(Object(h.a)(a)),a.fileUpload=a.fileUpload.bind(Object(h.a)(a)),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"onFormSubmit",value:function(e){e.preventDefault(),this.props.onGetFilename(this.state.file.name),this.fileUpload(this.state.file)}},{key:"onChange",value:function(e){this.setState({file:e.target.files[0]})}},{key:"fileUpload",value:function(e){var t=this,a=new FormData;a.append("file",e);return C.a.post("https://fierce-escarpment-27870.herokuapp.com/",a,{headers:{"content-type":"audio/wav"}}).then((function(e){return console.log(e),t.props.onGetData(e.data),t.props.onFileLoaded(!0),e}))}},{key:"render",value:function(){return i.a.createElement("form",{onSubmit:this.onFormSubmit},i.a.createElement("h1",null,"File Upload"),i.a.createElement("input",{type:"file",onChange:this.onChange}),i.a.createElement("button",{type:"submit"},"Upload"))}}]),t}(i.a.Component),L=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={loading:!1,data:[],filename:"bird1.wav",isLoaded:!1},a.handleData=a.handleData.bind(Object(h.a)(a)),a.handleFilename=a.handleFilename.bind(Object(h.a)(a)),a.handleFileLoaded=a.handleFileLoaded.bind(Object(h.a)(a)),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"handleData",value:function(e){this.setState({data:e})}},{key:"handleFilename",value:function(e){this.setState({filename:e})}},{key:"handleFileLoaded",value:function(e){this.setState({isLoaded:e})}},{key:"render",value:function(){return this.state.loading?i.a.createElement("div",{className:"loading"},i.a.createElement(m.a,{type:"spin",color:"#2eaa26",height:30,width:30})):i.a.createElement("div",null," asdf "),this.state.filename?i.a.createElement("div",null,i.a.createElement(D,{onGetData:this.handleData,onGetFilename:this.handleFilename,onFileLoaded:this.handleFileLoaded}),i.a.createElement(k,{audioPath:"https://fierce-escarpment-27870.herokuapp.com/".concat(this.state.filename),isPlaying:this.props.isPlaying,isLoaded:this.state.isLoaded,onFileLoaded:this.handleFileLoaded}),i.a.createElement(v,{data:this.state.data})):i.a.createElement("div",null,i.a.createElement(D,{onGetData:this.handleData,onGetFilename:this.handleFilename}),i.a.createElement(v,{data:this.state.data}))}}]),t}(n.Component),P=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={isPlaying:!1},a.handleKeyDown=a.handleKeyDown.bind(Object(h.a)(a)),document.addEventListener("keydown",a.handleKeyDown,!1),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"handleKeyDown",value:function(e){" "===e.key&&(e.preventDefault(),this.setState({isPlaying:!this.state.isPlaying}))}},{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement(L,{isPlaying:this.state.isPlaying}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(P,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[25,1,2]]]);
//# sourceMappingURL=main.cacd07ae.chunk.js.map